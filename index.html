 <!-- ================================================================================================================= -->
                          <!-- ====== INICIO DEL DOCUMENTO HTML ====== -->
 <!-- ================================================================================================================= -->
<!doctype html>
<html lang="es">
<head>
  <!-- ================================================================================================================= -->
  <!-- ====== CONFIGURACI√ìN B√ÅSICA DEL SITIO (meta, t√≠tulo, descripci√≥n) ====== -->
   <!-- ================================================================================================================= -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- ====== T√çTULO QUE SALE EN LA PESTA√ëA DEL NAVEGADOR ====== -->
  <title>Papeler√≠a Arco√≠ris | Art√≠culos escolares y de oficina</title>

  <!-- ====== DESCRIPCI√ìN PARA GOOGLE / SEO ====== -->
  <meta name="description" content="Papeler√≠a con gran variedad de productos: cuadernos, plumas, mochilas, impresiones y m√°s." />

  <!-- ================================================================================================================= -->
                            <!-- ====== ESTILOS CSS (DISE√ëO DE LA P√ÅGINA) ====== -->
  <!-- ================================================================================================================= -->
  
  <!--====== VARIABLES DE COLORES Y ESTILOS GENERALES (TEMA DEL SITIO) ======
:root{
  --bg:#f7f8ff;
  --card:#ffffff;
  --text:#1b1f2a;
  --muted:#5b657a;
  --brand:#6a5cff;
  --brand2:#2fd27b;
  --accent:#ffb703;
  --pink:#ff5ea8;
  --border:#e6e8f2;
  --shadow: 0 12px 30px rgba(23, 28, 45, .08);
  --radius:18px;
} -->

<!-- ====== HEADER FIJO: LOGO + MEN√ö + BUSCADOR + CARRITO ====== 
header{ ... }
.topbar{ ... }
.brand{ ... }
.logo{ ... }
.nav{ ... }
.pill{ ... }
.actions{ ... }
.search{ ... }
.btn{ ... }
.cartBadge{ ... } -->

  
  <style>
    :root{
      --bg:#f7f8ff;
      --card:#ffffff;
      --text:#1b1f2a;
      --muted:#5b657a;
      --brand:#6a5cff;    /* morado suave */
      --brand2:#2fd27b;   /* verde */
      --accent:#ffb703;   /* amarillo */
      --pink:#ff5ea8;     /* rosa */
      --border:#e6e8f2;
      --shadow: 0 12px 30px rgba(23, 28, 45, .08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 500px at 10% 0%, rgba(106,92,255,.18), transparent 55%),
        radial-gradient(700px 400px at 90% 10%, rgba(255,94,168,.16), transparent 55%),
        radial-gradient(900px 600px at 30% 100%, rgba(47,210,123,.12), transparent 55%),
        var(--bg);
    }
    a{color:inherit}
    .container{max-width:1100px;margin:0 auto;padding:18px}
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: rgba(247,248,255,.75);
      border-bottom:1px solid var(--border);
    }
    .topbar{
      display:flex; align-items:center; gap:14px;
      justify-content:space-between;
    }
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:900;
      letter-spacing:.2px;
    }
    .logo{
      width:40px;height:40px;border-radius:14px;
      background: conic-gradient(from 220deg, var(--brand), var(--pink), var(--accent), var(--brand2), var(--brand));
      box-shadow: var(--shadow);
    }
    .nav{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
    }
    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,.7);
      padding:8px 12px;
      border-radius:999px;
      text-decoration:none;
      color:var(--muted);
      font-weight:700;
      font-size:14px;
    }
    .pill:hover{border-color:#d6daf0}
    .actions{
      display:flex; align-items:center; gap:10px;
    }
    .search{
      display:flex; align-items:center; gap:8px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.75);
      border-radius:999px;
      padding:10px 12px;
      min-width: 260px;
    }
    .search input{
      border:0; outline:none; background:transparent;
      width:100%;
      font-size:14px;
    }
    .btn{
      border:0; cursor:pointer;
      border-radius: 14px;
      padding: 10px 12px;
      font-weight:900;
      box-shadow: var(--shadow);
      transition: transform .06s ease;
      text-decoration:none;
      display:inline-flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .btn:active{transform: translateY(1px)}
    .btn.primary{background: var(--brand); color:white}
    .btn.whatsapp{background: #25D366; color:#05210f}
    .btn.light{background: rgba(255,255,255,.85); border:1px solid var(--border); color:var(--text); box-shadow:none}
    .cartBadge{
      display:inline-flex; align-items:center; justify-content:center;
      width:22px; height:22px; border-radius:999px;
      background: var(--accent);
      font-size:12px; font-weight:900;
      color:#3a2b00;
    }
     /* Tarjeta de producto: estructura vertical fija */
     .product{
     display: flex;
     flex-direction: column;
     }

    /* La descripci√≥n ocupa un alto fijo (2 l√≠neas) para que todo alinee */
    .pdesc{
   display: -webkit-box;
   -webkit-box-orient: vertical;
   -webkit-line-clamp: 2;  /* 2 l√≠neas */
   overflow: hidden;
   min-height: calc(1.45em * 2); /* asegura el mismo alto aunque el texto sea corto */
   }

   /* La fila donde est√° precio + bot√≥n, se va hasta abajo */
   .product .row{
   margin-top: auto;       /* empuja la fila al final */
   align-items: center;
   }
     /* ====== RESPONSIVE: AJUSTES PARA CELULAR/TABLET ====== */
     @media (max-width: 700px){
     .topbar{
     flex-wrap: wrap;
     gap: 10px;
    }

     .nav{
     width: 100%;
     justify-content: center;
    }

     .actions{
     width: 100%;
     gap: 10px;
    }

     .search{
     width: 100%;
     min-width: 0;
    }

     .btn{
     padding: 10px 12px;
     border-radius: 14px;
    }

     /* Cards un poquito m√°s compactas */
     .product{
     padding: 12px;
    }

     .thumb{
     height: 130px;   /* un poco m√°s alto en m√≥vil para que se vean mejor */
    }

     .pname{
    font-size: 16px;
    }

     .pdesc{
     font-size: 13px;
    }
   }

    /* ====== HERO: SECCI√ìN PRINCIPAL (T√çTULO, DESCRIPCI√ìN, PROMOS) ====== */
    .hero{
      margin-top:18px;
      display:grid; gap:16px;
      grid-template-columns: 1.2fr .8fr;
      align-items:stretch;
    }
    @media (max-width: 900px){
      .hero{grid-template-columns:1fr}
      .search{min-width: 0; width: 100%;}
      .actions{flex-wrap:wrap; justify-content:flex-end}
    }
    .card{
      background: rgba(255,255,255,.88);
      border:1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:18px;
    }
    .hero h1{
      margin:0;
      font-size: clamp(26px, 4vw, 40px);
      line-height: 1.1;
    }
    .hero p{margin:10px 0 0;color:var(--muted); line-height:1.6; max-width: 65ch}
    .chips{display:flex; flex-wrap:wrap; gap:10px; margin-top:14px}
    .chip{
      background: rgba(106,92,255,.10);
      border:1px solid rgba(106,92,255,.18);
      color:#2f2a66;
      font-weight:800;
      padding:8px 10px;
      border-radius: 999px;
      font-size:13px;
    }
    .promo{
      display:flex; flex-direction:column; justify-content:space-between; gap:14px;
      background:
        radial-gradient(700px 380px at 10% 10%, rgba(255,94,168,.18), transparent 55%),
        radial-gradient(700px 380px at 90% 10%, rgba(106,92,255,.20), transparent 55%),
        rgba(255,255,255,.92);
    }
    .promoBox{
      border-radius: 16px;
      padding:14px;
      border:1px dashed rgba(106,92,255,.35);
      background: rgba(106,92,255,.06);
      color:#2f2a66;
      font-weight:800;
      line-height:1.5;
    }
    .grid2{
      display:grid; gap:10px;
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width: 500px){ .grid2{grid-template-columns:1fr} }

    /* ====== CAT√ÅLOGO: GRID DE PRODUCTOS + FILTROS ====== */
    .sectionTitle{
      display:flex; align-items:flex-end; justify-content:space-between; gap:10px;
      margin: 18px 0 10px;
    }
    .sectionTitle h2{margin:0}
    .filters{
      display:flex; gap:10px; flex-wrap:wrap;
    }
    select{
      border:1px solid var(--border);
      background: rgba(255,255,255,.85);
      border-radius: 14px;
      padding:10px 12px;
      font-weight:700;
      color:var(--text);
      outline:none;
    }
    .products{
      display:grid; gap:14px;
      grid-template-columns: repeat(12, 1fr);
    }

    /* ====== TARJETA DE PRODUCTO (ordena productos por columnas y estiliza cada tarjeta)====== */
    .product{
    grid-column: span 3;
    display:flex;
    flex-direction:column;
    gap:10px;
    padding:14px;

    border-radius: 22px;   /* esquinas redondeadas */
    overflow: hidden;      /* evita bordes puntiagudos */
   }

    @media (max-width: 1100px){ .product{grid-column: span 4;} }
    @media (max-width: 800px){ .product{grid-column: span 6;} }
    @media (max-width: 520px){ .product{grid-column: span 12;} }

   .thumb{
      height:120px;
      border-radius: 16px;
      border:1px solid var(--border);
      background:
        linear-gradient(135deg, rgba(106,92,255,.20), rgba(255,94,168,.12)),
        #fff;
      display:flex; align-items:center; justify-content:center;
      position:relative;
      overflow:hidden;
    }
     /* ===== IMAGEN DEL PRODUCTO ===== */
      .thumb img{
       width: 100%;
       height: 100%;
       object-fit: contain;
       background: white;

       border-radius: 14px; /* acompa√±a el redondeo */
      }

     /* ===== CONTENEDOR DE IMAGEN DEL PRODUCTO ===== */
     .thumb{
       height: 140px;
       padding: 10px;

       display: flex;
       align-items: center;
       justify-content: center;

       border-radius: 18px;   /* redondeo suave */
       overflow: hidden;     /* recorta bordes duros */
       }

    .thumb span{
      font-size:44px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.08));
    }
    .tag{
   position: absolute;
   top: 6px;
   left: 6px;

   background: #ffb703;
   color: #3a2b00;

   font-weight: 900;
   font-size: 11px;
   letter-spacing: .3px;
   text-transform: uppercase;

   padding: 4px 12px;          /* forma rectangular suave */
   border-radius: 999px;       /* CAPSULA (no cuadrado) */

   line-height: 1;
   border: 1px solid rgba(58,43,0,.2);
   box-shadow: 0 4px 10px rgba(0,0,0,.15);
   }

   /* ===== OPCIONAL: COLORES POR TIPO ===== */
  .tag.promo{ background:#ffb703; }
   .tag.top{ background:#6a5cff; color:white; }
   .tag.nuevo{ background:#2fd27b; color:#05331b; }

  .thumb{
   position: relative;
   padding-top: 16px;
   }
   
   @media (max-width:600px){
  .tag{
    font-size: 10px;
    padding: 3px 10px;
   }
  }
 .tag{
  top: 4px;
  }
    .thumb.noimg{
    display:flex;
    align-items:center;
    justify-content:center;
   }
   .thumb.noimg::after{
   content:"Imagen no encontrada";
   font-weight: 900;
   color: var(--muted);
   font-size: 13px;
   }
    .pname{margin:0; font-weight:900}
    .pdesc{margin:0; color:var(--muted); font-size:14px; line-height:1.45}
    .row{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .price{
      font-weight:1000;
      color:#1a2b55;
      letter-spacing:.2px;
    }
    .mini{
      font-size:12px; color:var(--muted);
    }

    /* ====== CARRITO (MODAL): DISE√ëO DEL DIALOG Y ELEMENTOS INTERNOS (define c√≥mo se ve el carrito cuando se abre)====== */
    dialog{
      border:0;
      border-radius: 18px;
      padding:0;
      width:min(520px, 92vw);
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
    }
    .drawerHeader{
      padding:16px 16px 10px;
      border-bottom:1px solid var(--border);
      background: rgba(255,255,255,.95);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .drawerBody{padding:14px 16px; background: rgba(255,255,255,.95)}
    .item{
      display:grid; grid-template-columns: 1fr auto; gap:8px;
      padding:10px 0; border-bottom:1px dashed #e3e6f3;
    }
    .item:last-child{border-bottom:0}
    .qty{
      display:inline-flex; gap:6px; align-items:center;
      border:1px solid var(--border);
      border-radius: 14px;
      padding:6px 8px;
      background: rgba(255,255,255,.9);
    }
    .qty button{
      width:28px; height:28px; border-radius: 10px;
      border:1px solid var(--border);
      background: white; cursor:pointer;
      font-weight:900;
    }
    .totals{margin-top:10px; padding-top:10px; border-top:1px solid var(--border)}
    .muted{color:var(--muted)}
    footer{padding:30px 18px 40px; text-align:center; color:var(--muted)}

    /* ===== Interacci√≥n visual ===== */
   .card{ transition: transform .12s ease, box-shadow .12s ease; }
   .card:hover{ transform: translateY(-2px); box-shadow: 0 18px 40px rgba(23, 28, 45, .12); }

   .btn{ transition: transform .08s ease, filter .12s ease; }
   .btn:hover{ filter: brightness(1.03); transform: translateY(-1px); }

   .thumb img{ transition: transform .18s ease; }
   .product:hover .thumb img{ transform: scale(1.03); }

   /* Animaci√≥n suave al aparecer productos */
   @keyframes fadeUp { from{ opacity:0; transform: translateY(8px);} to{opacity:1; transform:none;} }
   .product{ animation: fadeUp .22s ease both; }

   /* ===== SERVICIOS INTERACTIVOS (TARJETAS CLICABLES) ===== */
   .serviceCard{
     grid-column: span 4;
     box-shadow:none;
     text-align:left;
     cursor:pointer;
     border:1px solid var(--border);
     background: rgba(255,255,255,.9);
     border-radius: 18px;
     padding: 14px;
     transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }

   .serviceCard:hover{
     transform: translateY(-2px);
     box-shadow: 0 14px 30px rgba(23,28,45,.10);
     border-color:#d6daf0;
    }

   @media (max-width: 800px){
     .serviceCard{ grid-column: span 12; }
   }
    @media (max-width: 900px){
     #contacto > div{
     grid-template-columns: 1fr !important;
    }
   }
   .contactCard{
     background: linear-gradient(135deg,
     rgba(47,210,123,.18),
     rgba(255,255,255,.95)
    );
     border-radius: 22px;
     box-shadow: 0 16px 36px rgba(23,28,45,.12);
    }

    /* ===== SECCI√ìN SERVICIOS (FONDO DESTACADO) ===== */
    .servicesSection{
     background:
     radial-gradient(700px 350px at 10% 0%, rgba(106,92,255,.16), transparent 55%),
     radial-gradient(600px 350px at 90% 20%, rgba(255,94,168,.16), transparent 55%),
     radial-gradient(700px 350px at 30% 100%, rgba(47,210,123,.12), transparent 55%),
     rgba(248, 163, 163, 0.959);

     border: 1px solid var(--border);
     border-radius: 22px;
     box-shadow: 0 18px 40px rgba(23,28,45,.12);
     }
     
     /* ===== PROMOS INTERACTIVAS ===== */
     .promoAction{
      width:100%;
      text-align:left;
      cursor:pointer;
      border:1px dashed rgba(106,92,255,.35);
      background: rgba(106,92,255,.06);
      transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      }
     .promoAction:hover{
      transform: translateY(-2px);
      box-shadow: 0 14px 30px rgba(23,28,45,.10);
      filter: brightness(1.02);
     }
     .promoAction:active{ transform: translateY(0px); }
     .promoAction:focus{
     outline: 3px solid rgba(106,92,255,.25);
     outline-offset: 2px;
     }

     /* Respeta accesibilidad */
     @media (prefers-reduced-motion: reduce){
     .promoAction{ transition:none; }
     }

      /*Para que se vea bonito y responsivo */
     .quickPacks{
      display:flex;
      gap:10px;
     flex-wrap:wrap;
     }
     .quickPackBtn{
      box-shadow:none;
      border:1px solid var(--border);
      background: rgba(255,255,255,.85);
      }
     .quickPackBtn:hover{
      transform: translateY(-1px);
      }
    </style>
     <script src="https://www.google.com/recaptcha/api.js?render=6Lcu91EsAAAAALVg3XWvFfk-JtvBf7fWlmAGLMh_"></script>
   </head>

   <!-- ================================================================================================================= -->
                      <!-- ====== TERMINAN LOS ESTILOS CSS (DISE√ëO DE LA P√ÅGINA) ====== -->
   <!-- ================================================================================================================= -->

    <!-- ================================================================================================================= -->
    <!--                                            JS                                                                     -->
    <!-- ================================================================================================================= -->

    <!-- ====== HEADER: BARRA SUPERIOR FIJA (LOGO + MEN√ö + BUSCADOR + CARRITO) ====== -->
 <body>
  <header>
    <div class="container topbar">
      <div class="brand" aria-label="Marca">
        <div class="logo" aria-hidden="true"></div>
        <div>
          Papeler√≠a <span style="color:var(--brand)">Arco√≠ris</span><br/>
          <span class="mini">Escolar ‚Ä¢ Oficina ‚Ä¢ Regalos</span>
        </div>
      </div>

      <nav class="nav" aria-label="Navegaci√≥n">
        <a class="pill" href="#catalogo">Cat√°logo</a>
        <a class="pill" href="#servicios">Servicios</a>
        <a class="pill" href="#contacto">Contacto</a>
      </nav>

      <div class="actions">
        <div class="search" title="Buscar productos">
          üîé <input id="search" type="search" placeholder="Buscar (cuaderno, pluma, mochila...)" />
        </div>
        <button class="btn light" id="openCart" type="button" title="Ver carrito">
          üõí Carrito <span class="cartBadge" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

    <!-- MENSAJE CUANDO LO AGREGAS AL CARRITO  -->
   <div id="toast" style="
   position:fixed;
   left:50%;
   bottom:18px;
   transform:translateX(-50%);
   background: rgba(27,31,42,.92);
   color:#fff;
   padding:10px 14px;
   border-radius:999px;
   font-weight:800;
   font-size:14px;
   box-shadow: 0 18px 40px rgba(0,0,0,.22);
   opacity:0;
   pointer-events:none;
   transition: opacity .18s ease, transform .18s ease;
   z-index:9999;    
   "></div>

   <!-- BOTON FLOTANTE DEL CARRITO  -->
   <button id="fabCart" class="btn primary" type="button" title="Abrir carrito"
   style="position:fixed; right:16px; bottom:16px; z-index:60; border-radius:999px;">
   üõí <span class="cartBadge" id="cartCountFab">0</span>
   </button>

   <!-- ====== CONTENIDO PRINCIPAL ====== -->
  <main class="container">
    <!-- ====== HERO: PRESENTACI√ìN PRINCIPAL ====== -->
    <section class="hero">
      <div class="card">
        <h1>Todo para tu escuela y oficina, en un solo lugar ‚ú®</h1>
        <p>
          Encuentra cuadernos, plumas, colores, carpetas, mochilas, hojas, accesorios y m√°s.
          Compra r√°pido y pregunta por disponibilidad por WhatsApp.
        </p>
       <!-- BENEFICIOS  -->
        <div class="chips" aria-label="Beneficios">
          <span class="chip">üìö Gran variedad</span>
          <span class="chip">üí≥ Pago en tienda</span>
          <span class="chip">üßæ Facturaci√≥n</span>
          <span class="chip">üöö Entregas locales</span>
        </div>

        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn primary" href="#catalogo">Ver cat√°logo</a>
          <!-- Cambia el n√∫mero por el tuyo (formato internacional) -->
          <a class="btn whatsapp" id="waTop" href="#" rel="noopener">WhatsApp</a>
        </div>
        <p class="mini" style="margin-top:10px;"> <--Tip: puedes cambiar el nombre, colores y productos en el c√≥digo. --> </p>
      </div>
      
      <!-- CARRITO DE PROMOCIONES -->
      <div class="card promo" id="promoPanel">
      <!-- PROMO PRINCIPAL -->
       <button class="promoBox promoAction" type="button"
        data-action="filter"
        data-cat="Cuadernos"
        data-search="cuaderno"
        aria-label="Ver cuadernos en promo">
       üéâ Promo de la semana: <b>3x2</b> en cuadernos seleccionados.
       <div class="mini" style="margin-top:6px;">
       ‚è≥ Termina en: <b id="promoCountdown">--:--:--</b> ‚Ä¢ Toca para ver cuadernos
         </div>
          </button>

         <div class="grid2" style="margin-top:12px;">
         <!-- IMPRESIONES -->
         <button class="promoBox promoAction" type="button"
         style="border-color: rgba(47,210,123,.45); background: rgba(47,210,123,.08);"
         data-action="service"
         data-service="impresiones"
         aria-label="Abrir servicio de impresiones">
        üñ®Ô∏è Impresiones y copias<br><span class="mini">Blanco/negro y color</span>
         <div class="mini" style="margin-top:6px;">Toca para cotizar r√°pido</div>
         </button>

          <!-- REGALOS -->
         <button class="promoBox promoAction" type="button"
           style="border-color: rgba(255,183,3,.45); background: rgba(255,183,3,.10); color:#3a2b00;"
           data-action="service"
           data-service="regalos"
           aria-label="Abrir servicio de regalos">
           üéÅ Envolturas y detalles<br><span class="mini">Regalos escolares</span>
           <div class="mini" style="margin-top:6px;">Toca para pedir</div>
          </button>
         </div>
           
         <!-- PAQUETES DE PAPELERIA -->
         <div class="promoBox" style="border-color: rgba(106,92,255,.35); background: rgba(106,92,255,.05);">
          üöÄ <b>Pedido r√°pido</b>
         <div class="mini" style="margin-top:6px;">Toca un paquete y se agrega al carrito</div>

         <div class="quickPacks" style="margin-top:10px;">
           <button class="btn light quickPackBtn" type="button" onclick="addQuickPack('primaria')">üìí Lista b√°sica primaria</button>
           <button class="btn light quickPackBtn" type="button" onclick="addQuickPack('secundaria')">üéí Lista secundaria</button>
           <button class="btn light quickPackBtn" type="button" onclick="addQuickPack('oficina')">üñäÔ∏è Lista oficina</button>
           </div>
         </div>


        <!-- WHATSAPP RAPIDO -->
       <button class="promoBox promoAction" type="button"
        style="border-color: rgba(255,94,168,.45); background: rgba(255,94,168,.08);"
        data-action="wa"
        aria-label="Enviar mensaje por WhatsApp">
        ‚≠ê Atenci√≥n r√°pida por WhatsApp para cotizaciones y apartados.
        <div class="mini" style="margin-top:6px;">Toca para escribir ‚Äúquiero cotizaci√≥n‚Äù</div>
      </button>
     </div>
    </section>

    <!-- ====== CAT√ÅLOGO: FILTROS + PRODUCTOS ====== -->
    <section id="catalogo">
      <div class="sectionTitle">
        <h2>Cat√°logo</h2>
         <div class="filters">
          <select id="category">
            <option value="all">Todas las categor√≠as</option>
            <option value="Escritura">Escritura</option>
            <option value="Cuadernos">Cuadernos</option>
            <option value="Arte">Arte</option>
            <option value="Organizaci√≥n">Organizaci√≥n</option>
            <option value="Mochilas">Mochilas</option>
            <option value="Impresi√≥n">Impresi√≥n</option>
            <option value="Papeler√≠a">Papeler√≠a</option>
          </select>

          <select id="sort">
            <option value="popular">Ordenar: Popular</option>
            <option value="priceAsc">Precio: Menor a mayor</option>
            <option value="priceDesc">Precio: Mayor a menor</option>
          </select>
        </div>
      </div>

      <div class="products" id="products"></div>
    </section>

    <!-- ====== SERVICIOS: SECCI√ìN DE SERVICIOS DE LA PAPELER√çA ====== -->
    
    <section id="servicios" class="card servicesSection" style="margin-top:16px;">
    <h2 class="servicesTitle">Servicios</h2>
    <div class="products" style="margin-top:10px;">
    <!-- ===== SERVICIO 1 ===== -->
    <button class="card serviceCard" type="button" onclick="openService('impresiones')">
      <h3 style="margin:0;">üñ®Ô∏è Impresiones</h3>
      <p class="pdesc">Copias, escaneo, impresiones B/N y color (seg√∫n disponibilidad).</p>
      <span class="mini muted">Toca para elegir detalles</span>
    </button>

    <!-- ===== SERVICIO 2 ===== -->
    <button class="card serviceCard" type="button" onclick="openService('facturacion')">
      <h3 style="margin:0;">üßæ Facturaci√≥n</h3>
      <p class="pdesc">Solic√≠tala al momento de tu compra (trae tus datos fiscales).</p>
      <span class="mini muted">Toca para agregar nota</span>
    </button>

    <!-- ===== SERVICIO 3 ===== -->
    <button class="card serviceCard" type="button" onclick="openService('regalos')">
      <h3 style="margin:0;">üéÅ Regalos</h3>
      <p class="pdesc">Envolturas, mo√±os, tarjetas y detalles para temporada.</p>
      <span class="mini muted">Toca para pedir</span>
       </button>
      </div>
     </section>

    <!-- ====== CONTACTO: DIRECCI√ìN, HORARIO Y BOT√ìN DE WHATSAPP ====== -->
    <section id="contacto" class="card contactCard" style="margin-top:16px;"> 
      <h2 style="margin-top:0;">Contacto</h2>
      <p class="muted" style="margin-top:6px;">
        Direcci√≥n: <b>Paseo Cuauhnahuac No. 1932 Plaza Cibeles Jiutepec Plaza Cibeles Jiutepec, 62553 Jiutepec,Morelos</b> ‚Ä¢ Horario: <b>Lun‚ÄìS√°b 9:00‚Äì19:00</b> ‚Ä¢ Tel: <b>52-777-348-1853</b>
      </p>
      <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
        <a class="btn whatsapp" id="waBottom" href="#" rel="noopener">Escr√≠benos por WhatsApp</a>
        <a class="btn light" href="#catalogo">Volver al cat√°logo</a>
      </div>
      <p class="mini" style="margin-top:10px;">*Esta p√°gina es demo. El carrito es para armar pedido y mandarlo por WhatsApp.</p>
      <!-- ===== UBICACI√ìN DEL LOCAL ===== -->
      <div style="margin-top:14px; display:grid; grid-template-columns: 1fr 1.2fr; gap:14px; align-items:stretch;">

      <!-- Informaci√≥n y botones -->
       <div class="card" style="box-shadow:none; background:rgba(255,255,255,.6);">
        <p class="muted" style="margin:0 0 10px;">
        üìç <b>Ubicaci√≥n:</b> Paseo Cuauhn√°huac No. 1932, Plaza Cibeles Jiutepec<br>
        üïí <b>Horario:</b> Lun‚ÄìS√°b 9:00‚Äì19:00<br>
        üìû <b>WhatsApp:</b> 52 777 348 1853
       </p>

       <div style="display:flex; gap:10px; flex-wrap:wrap;">
       <!-- WhatsApp -->
       <a class="btn whatsapp" id="waMap" href="#" rel="noopener">
        Pedir por WhatsApp
       </a>

       <!-- C√≥mo llegar -->
        <a class="btn light"
          href="https://www.google.com/maps/dir/?api=1&destination=Paseo+Cuauhnahuac+1932+Plaza+Cibeles+Jiutepec+Morelos"
          target="_blank" rel="noopener">
         üìç C√≥mo llegar
          </a>
        </div>
      </div>

       <!-- Mapa visual -->
       <div class="card" style="padding:0; overflow:hidden;">
       <iframe
        src="https://www.google.com/maps?q=Paseo%20Cuauhnahuac%201932%20Plaza%20Cibeles%20Jiutepec%20Morelos&output=embed"
        width="100%"
        height="320"
        style="border:0;"
        allowfullscreen
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade">
         </iframe>
        </div>
       </div>
      </section>
     </main>

  <!-- ====== FOOTER: PIE DE P√ÅGINA ====== -->
  <footer>
    ¬© <span id="year"></span> Papeler√≠a Arco√≠ris
  </footer>

  <!-- ====== MODAL DEL CARRITO (DIALOG) ====== -->
  <dialog id="cartDialog" aria-label="Carrito de compras">
    <div class="drawerHeader">
      <div style="font-weight:1000;">üõí Tu carrito</div>
      <button class="btn light" id="closeCart" type="button">Cerrar</button>
    </div>
    <div class="drawerBody">
      <div id="cartItems"></div>

      <div class="totals">
        <div class="row"><span class="muted">Subtotal</span><span class="price" id="subtotal">$0</span></div>
        <div class="row"><span class="muted">Notas</span><span class="mini">Precios demo</span></div>

        <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
          <button class="btn primary" id="sendWA" type="button">Enviar pedido por WhatsApp</button>
          <button class="btn light" id="clearCart" type="button">Vaciar</button>
        </div>
        <p class="mini" style="margin-top:10px;">
          Al enviar, se abre WhatsApp con tu lista de productos.
        </p>
      </div>
    </div>
  </dialog>
     <!-- ===== MODAL DE SERVICIOS (INTERACCI√ìN) ===== -->
       <dialog id="serviceDialog" aria-label="Servicio">
         <div class="drawerHeader">
          <div style="font-weight:1000;" id="serviceTitle">Servicio</div>
         <button class="btn light" id="closeService" type="button">Cerrar</button>
         </div>

        <div class="drawerBody">
         <p class="muted" id="serviceDesc" style="margin-top:0;"></p>

       <!-- FORMULARIO DIN√ÅMICO DEL SERVICIO -->
        <div id="serviceForm"></div>

         <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap;">
         <button class="btn primary" id="addServiceBtn" type="button">
         Agregar servicio
           </button>
            <button class="btn light" id="serviceToWA" type="button">
         Enviar solo este servicio
          </button>
           </div>

          <p class="mini" style="margin-top:10px;">
        Tip: agrega detalles para que te coticen m√°s r√°pido.
            </p>
          </div>
       </dialog>

  <!-- =============================================================================================================== -->
                           <!-- ====== JAVASCRIPT: FUNCIONES E INTERACCI√ìN (CAT√ÅLOGO Y CARRITO) ====== -->
  <script>
    // DETECTOR DE ERRORES
    window.onerror = function(msg, src, line, col, err){
     alert("ERROR JS: " + msg + "\nL√≠nea: " + line + ":" + col);
    };

    // ====== CONFIGURACI√ìN GENERAL (WHATSAPP + LISTA DE PRODUCTOS) ======
    // Cambia a tu WhatsApp (M√©xico ejemplo: 52 + n√∫mero a 10 d√≠gitos)
    const WHATSAPP_NUMBER = "527773481853"; // <-- PON AQU√ç TU N√öMERO

    // ====== HELPERS (SIEMPRE AL INICIO) ======
    const byId = (id) => document.getElementById(id);
    const money = (n) => "$" + Number(n).toLocaleString("es-MX");

   // ====== EMOJIS POR CATEGOR√çAS ======
    const CAT_ICON = {
    "Escritura":"üñäÔ∏è",
    "Cuadernos":"üìí",
    "Arte":"üé®",
    "Organizaci√≥n":"üóÇÔ∏è",
    "Mochilas":"üéí",
    "Impresi√≥n":"üñ®Ô∏è",
    "Papeler√≠a":"üìå"
   };

    // ====== BASE DE DATOS LOCAL (PRODUCTOS DEMO) (el n√∫mero y la lista de productos para renderizarlos) ======
    // Productos demo (puedes agregar/quitar)
    const PRODUCTS = [
      // MATERIALES GENERALES
      { id: 1, name: "Cuaderno profesional 100 hojas", desc: "Pasta dura, rayado.", price: 80, cat: "Cuadernos", img: "img/Cuaderno.jpg", badge:"Promo" },
      { id: 2, name: "Paquete de hojas blancas (500)", desc: "Tama√±o carta.", price: 38, cat: "Organizaci√≥n", img: "img/pa_hojas.jpg", badge:"" },
      { id: 3, name: "Plumas gel (44 pz)", desc: "Tinta suave, colores surtidos.", price: 55, cat: "Escritura", img: "img/plu_gel.jpg", badge:"Top" },
      { id: 4, name: "L√°pices HB (12)", desc: "Ideal para escuela.", price: 50, cat: "Escritura",img: "img/lapiz.jpg" , badge:"" },
      { id: 5, name: "Colores (24)", desc: "Colores intensos.", price: 450, cat: "Arte", img: "img/colores.jpg", badge:"" },
      { id: 6, name: "Marcadores (12)", desc: "Punta media, surtidos.", price: 88, cat: "Arte", img: "img/marca.jpg", badge:"" },
      { id: 7, name: "Carpeta tama√±o carta", desc: "Con broche.", price: 105, cat: "Organizaci√≥n", img: "img/carpeta.jpg", badge:"" },
      { id: 8, name: "Mochila escolar (Impermeable)", desc: "Ligera y resistente.", price: 499, cat: "Mochilas", img: "img/mochi.jpg", badge:"Nuevo" },
      { id: 9, name: "Impresi√≥n B/N (1 hoja)", desc: "Precio por hoja.", price: 2, cat: "Impresi√≥n", img: "img/impre.jpg", badge:"" },
      { id:10, name: "Engrapadora mini", desc: "Compacta para oficina.", price: 79, cat: "Organizaci√≥n", img: "img/engra.jpg", badge:"" },
      { id:11, name: "Resaltadores (10)", desc: "Colores vibrantes.", price: 72, cat: "Escritura", img: "img/resal.jpg", badge:"" },
      { id:12, name: "Post-its (3 bloques de raya)", desc: "Notas adhesivas.", price: 48, cat: "Organizaci√≥n", img: "img/postin.jpg", badge:"" },
      { id: 13, name: "Pegamento en barra", desc: "Ideal para tareas escolares.", price: 25, cat: "Organizaci√≥n", img: "img/pegamento.jpg", badge:"" },
      { id: 14, name: "Corrector l√≠quido", desc: "Secado r√°pido.", price: 34, cat: "Escritura", img: "img/corrector.jpg", badge:"Top" },
      { id: 15, name: "Tijeras escolares", desc: "Punta redonda, seguras.", price: 45, cat: "Organizaci√≥n", img: "img/tijeras.jpg", badge:"" },
      { id: 16, name: "Regla 30 cm", desc: "Pl√°stico resistente.", price: 23, cat: "Organizaci√≥n", img: "img/regla.jpg", badge:"" },
      { id: 17, name: "Calculadora b√°sica", desc: "Perfecta para escuela.", price: 220, cat: "Organizaci√≥n", img: "img/calculadora.jpg", badge:"Nuevo" },
      { id: 18, name: "Cartulina (100 pz)", desc: "Blancas.", price: 251, cat: "Arte", img: "img/cartulina.jpg", badge:"" },
      // UTILES ESCOLARES COMUNES 
      { id: 19, name: "Goma blanca", desc: "No mancha el papel.", price: 10, cat: "Escritura", img: "img/borrador.jpg", badge:"" },
      { id: 20, name: "Sacapuntas met√°lico", desc: "Filo duradero.", price: 15, cat: "Escritura", img: "img/sacapuntas.jpg", badge:"" },
      { id: 21, name: "Cuaderno cuadro grande 100 hojas", desc: "Ideal para primaria.", price: 95, cat: "Cuadernos", img: "img/cuaderno-cuadro.jpg", badge:"Promo" },
      { id: 22, name: "Plumones para pizarr√≥n (4pz)", desc: "Colores surtidos.", price: 132, cat: "Escritura", img: "img/plumon-pizarron.jpg", badge:"" },
      // ARTE Y CREATIVIDAD
      { id: 23, name: "Plastilina (12 barras)", desc: "Colores vivos.", price: 85, cat: "Arte", img: "img/plastilina.jpg", badge:"" },
      { id: 24, name: "Acuarelas escolares", desc: "Incluye pincel.", price: 55, cat: "Arte", img: "img/acuarelas.jpg", badge:"Top" },
      { id: 25, name: "Papel crep√© (24pz)", desc: "Colores variados.", price: 150, cat: "Arte", img: "img/crepe.jpg", badge:"" },
      { id: 26, name: "Pinceles (set 6)", desc: "Diferentes tama√±os.", price: 48, cat: "Arte", img: "img/pinceles.jpg", badge:"" },
      // ORGANIZACION Y OFICINA 
      { id: 27, name: "Folder tama√±o carta", desc: "Resistente.", price: 12, cat: "Organizaci√≥n", img: "img/folder.jpg", badge:"" },
      { id: 28, name: "Separadores de colores", desc: "Paquete 10 pzas.", price: 89, cat: "Organizaci√≥n", img: "img/separadores.jpg", badge:"" },
      { id: 29, name: "Porta documentos", desc: "de plastico y muy resistente.", price: 2449, cat: "Organizaci√≥n", img: "img/portadocumentos.jpg", badge:"Nuevo" },
      { id: 30, name: "Engrapadora est√°ndar", desc: "Uso escolar y oficina.", price: 178, cat: "Organizaci√≥n", img: "img/engrapadora.jpg", badge:"" },
      // MOCHILAS Y ACCESORIOS 
      { id: 31, name: "Lonchera t√©rmica", desc: "Mantiene temperatura de tus comidas preferidas.", price: 379, cat: "Mochilas", img: "img/lonchera.jpg", badge:"" },
      { id: 32, name: "Lapicera escolar", desc: "Cierre resistente y bien organizado.", price: 249, cat: "Mochilas", img: "img/lapicera.jpg", badge:"" },
      { id: 33, name: "Mochila infantil", desc: "Dise√±os surtidos con todo incluido.", price: 380, cat: "Mochilas", img: "img/mochila-infantil.jpg", badge:"Top" },
      //SERVICIOS 
      { id: 34, name: "Impresi√≥n color", desc: "Precio por hoja.", price: 5, cat: "Impresi√≥n", img: "img/impresion-color.jpg", badge:"" },
      { id: 35, name: "Escaneo de documentos", desc: "Por hoja.", price: 6, cat: "Impresi√≥n", img: "img/escaneo.jpg", badge:"" },
      { id: 36, name: "Enmicado tama√±o carta", desc: "Protecci√≥n de documentos.", price: 25, cat: "Impresi√≥n", img: "img/enmicado.jpg", badge:"Nuevo" },
      { id: 37, name: "Envolturas", desc: "Para esos regalos importantes, colores para todas las ocasiones.", price: 50, cat: "Papeler√≠a", img: "img/envolturas.jpg", badge:"" },
      { id: 38, name: "Kit Organizador", desc: "Lindo y practico para cualquier actividad.", price: 150, cat: "Papeler√≠a", img: "img/kit.jpg", badge:"Nuevo" },
      
      // ===== ESCOLARES =====
      { id: 39, name: "Cuaderno espiral 200 hojas", desc: "Raya o cuadro, espiral resistente.", price: 185, cat: "Cuadernos", img: "img/cuaderno-200.jpg", badge:"Top" },
      { id: 40, name: "Block de dibujo", desc: "Hojas blancas para dibujo escolar.", price: 150, cat: "Arte", img: "img/block-dibujo.jpg", badge:"" },
      { id: 41, name: "Juego de geometr√≠a (4 pzas)", desc: "Regla, escuadras y transportador.", price: 30, cat: "Organizaci√≥n", img: "img/juego-geometria.jpg", badge:"Top" },
      { id: 42, name: "Comp√°s escolar", desc: "Con punta met√°lica.", price: 75, cat: "Organizaci√≥n", img: "img/compas.jpg", badge:"Nuevo" },
      { id: 43, name: "Corrector en cinta", desc: "Secado instant√°neo.", price: 60, cat: "Escritura", img: "img/corrector-cinta.jpg", badge:"Top" },
      { id: 44, name: "Pegamento l√≠quido", desc: "Ideal para trabajos escolares.", price: 50, cat: "Organizaci√≥n", img: "img/pegamento-liquido.jpg", badge:"" },
      { id: 45, name: "Plumones delgados (12)", desc: "Colores surtidos, punta fina.", price: 115, cat: "Arte", img: "img/plumones-delgados.jpg", badge:"" },
      { id: 46, name: "Borrador de miga", desc: "No da√±a el papel.", price: 15, cat: "Escritura", img: "img/borrador-miga.jpg", badge:"" },

     // ===== ARTE Y MANUALIDADES =====
     { id: 47, name: "Foamy colores (1pz)", desc: "Ideal para manualidades.", price: 15, cat: "Arte", img: "img/foamy.jpg", badge:"Promo" },
     { id: 48, name: "Foamy diamantado (1pz)", desc: "Colores brillantes.", price: 22, cat: "Arte", img: "img/foamy-diamantado.jpg", badge:"" },
     { id: 49, name: "Cartulina colores", desc: "Paquete surtido.", price: 120, cat: "Arte", img: "img/cartulina-color.jpg", badge:"Top" },
     { id: 50, name: "Cartoncillo", desc: "Resistente para trabajos.", price: 16, cat: "Arte", img: "img/cartoncillo.jpg", badge:"" },
     { id: 51, name: "Pintura acr√≠lica", desc: "Colores b√°sicos.", price: 38, cat: "Arte", img: "img/pintura-acrilica.jpg", badge:"Nuevo" },
     { id: 52, name: "Silic√≥n fr√≠o", desc: "Para manualidades escolares.", price: 80, cat: "Arte", img: "img/silicon-frio.jpg", badge:"Top" },
     { id: 53, name: "Barras de silic√≥n", desc: "Paquete est√°ndar 1KG.", price: 140, cat: "Arte", img: "img/silicon-barras.jpg", badge:"" },

     // ===== OFICINA =====
     { id: 54, name: "Clips met√°licos", desc: "Paquete chico.", price: 30, cat: "Organizaci√≥n", img: "img/clips.jpg", badge:"" },
     { id: 55, name: "Broches BACO", desc: "Paquete est√°ndar.", price: 100, cat: "Organizaci√≥n", img: "img/broches-baco.jpg", badge:"Top" },
     { id: 56, name: "Cinta adhesiva transparente", desc: "Uso escolar y oficina.", price: 30, cat: "Organizaci√≥n", img: "img/cinta.jpg", badge:"" },
     { id: 57, name: "Perforadora", desc: "Perfora hasta 10 hojas.", price: 145, cat: "Organizaci√≥n", img: "img/perforadora.jpg", badge:"Top" },
     { id: 58, name: "Porta-l√°pices", desc: "Metal resistente.", price: 55, cat: "Organizaci√≥n", img: "img/porta-lapices.jpg", badge:"" },
 
     // ESTO FALTA DE IMAGENES
     // ===== TECNOLOG√çA B√ÅSICA =====
     { id: 59, name: "Memoria USB 16GB", desc: "Compatible con PC y laptop.", price: 98, cat: "Organizaci√≥n", img: "img/usb-16gb.jpg", badge:"Top" },
     { id: 60, name: "Aud√≠fonos econ√≥micos", desc: "Ideales para clases.", price: 120, cat: "Organizaci√≥n", img: "img/audifonos.jpg", badge:"" },
     { id: 61, name: "Pilas AA", desc: "Paquete 4 piezas.", price: 80, cat: "Organizaci√≥n", img: "img/pilas-aa.jpg", badge:"" },
     { id: 62, name: "Calculadora cient√≠fica", desc: "Para secundaria y bachillerato.", price:434, cat: "Organizaci√≥n", img: "img/calculadora-cientifica.jpg", badge:"Top" },

    // ===== REGALOS =====
    { id: 63, name: "Bolsa para regalo (1pz)", desc: "Dise√±os surtidos.", price: 25, cat: "Papeler√≠a", img: "img/bolsa-regalo.jpg", badge:"" },
    { id: 64, name: "Papel para regalo", desc: "Rollo decorativo.", price: 30, cat: "Papeler√≠a", img: "img/papel-regalo.jpg", badge:"Promo" },
    { id: 65, name: "Tarjeta de felicitaci√≥n", desc: "Para toda ocasi√≥n.", price: 20, cat: "Papeler√≠a", img: "img/tarjeta.jpg", badge:"" },

    ];

     // ====== PAQUETES "PEDIDO R√ÅPIDO" ======
    // Formato: { id: PRODUCT_ID, qty: CANTIDAD }
    const QUICK_PACKS = {
     primaria: [
     { id: 21, qty: 2 }, // Cuaderno cuadro grande 100 hojas
     { id: 4,  qty: 1 }, // L√°pices HB (12)
     { id: 19, qty: 1 }, // Goma blanca
     { id: 20, qty: 1 }, // Sacapuntas met√°lico
     { id: 16, qty: 1 }, // Regla 30 cm
     { id: 5,  qty: 1 }, // Colores (24)
     { id: 13, qty: 1 }, // Pegamento en barra
     { id: 15, qty: 1 }, // Tijeras escolares
     ],

     secundaria: [
     { id: 1,  qty: 2 }, // Cuaderno profesional 100 hojas
     { id: 3,  qty: 1 }, // Plumas gel (44 pz)
     { id: 11, qty: 1 }, // Resaltadores (10)
     { id: 12, qty: 1 }, // Post-its
     { id: 7,  qty: 1 }, // Carpeta tama√±o carta
     { id: 17, qty: 1 }, // Calculadora b√°sica
     { id: 32, qty: 1 }, // Lapicera escolar
     { id: 33, qty: 1 }, // Mochila infantil (puedes cambiar por otra si quieres)
     ],

     oficina: [
     { id: 2,  qty: 1 }, // Hojas blancas (500)
     { id: 30, qty: 1 }, // Engrapadora est√°ndar
     { id: 27, qty: 10 },// Folder tama√±o carta (paquete simulado)
     { id: 28, qty: 1 }, // Separadores de colores
     { id: 12, qty: 1 }, // Post-its
     { id: 14, qty: 1 }, // Corrector l√≠quido
     { id: 10, qty: 1 }, // Engrapadora mini (opcional, quita si no quieres 2)
     ],
    };
     
     // ====== FUNCI√ìN: AGREGAR PAQUETE AL CARRITO ======
      window.addQuickPack = function(packKey){
     const pack = QUICK_PACKS[packKey];
      if(!pack){ alert("Paquete no encontrado."); return; }

      // Validaci√≥n: que existan IDs en PRODUCTS
      const missing = pack.filter(i => !PRODUCTS.some(p => p.id === i.id));
      if(missing.length){
       alert("Hay productos en el paquete que no existen en PRODUCTS. Revisa IDs: " + missing.map(x=>x.id).join(", "));
       return;
       }

        // Agrega al carrito
        for(const item of pack){
        cart[item.id] = (cart[item.id] || 0) + item.qty;
        }

       saveCart();
       renderCart();

      // Mensaje bonito
       const name =
       packKey === "primaria" ? "üìí Lista b√°sica primaria" :
       packKey === "secundaria" ? "üéí Lista secundaria" :
       "üñäÔ∏è Lista oficina";

     showToast(`‚úÖ ${name} agregado`);
     };


    //=================================================================================================================
    //                                            JS 
    //=================================================================================================================
    
    // ====== ESTADO (MEMORIA) DEL CARRITO (aqu√≠ se guarda lo que el usuario agrega)======
    // cart guarda: { idProducto: cantidad }
    let cart = {}; // {productId: qty}

    // ====== SERVICIOS SELECCIONADOS ======
     let servicesSelected = []; // [{key, title, details}]

     const SERVICES = {
     impresiones: {
     title: "üñ®Ô∏è Impresiones",
     desc: "Elige tipo y cantidad para cotizar.",
     form: () => `
      <label class="mini muted">Tipo</label><br>
      <select id="s_type" style="width:100%; margin:6px 0 10px;">
        <option value="Blanco y negro">Blanco y negro</option>
        <option value="Color">Color</option>
      </select>

      <label class="mini muted">Cantidad de hojas</label><br>
      <input id="s_qty" type="number" min="1" value="1" style="width:100%; padding:10px 12px; border-radius:14px; border:1px solid var(--border);" />

      <div style="margin-top:10px;">
        <label class="mini muted">Notas</label><br>
        <input id="s_note" type="text" placeholder="Ej: tama√±o carta, doble cara..." style="width:100%; padding:10px 12px; border-radius:14px; border:1px solid var(--border);" />
      </div>
    `,
    read: () => ({
      tipo: byId("s_type").value,
      hojas: byId("s_qty").value,
      notas: byId("s_note").value.trim()
    })
  },

  facturacion: {
    title: "üßæ Facturaci√≥n",
    desc: "Agrega una nota para tu factura (RFC, uso CFDI, etc.).",
    form: () => `
      <label class="mini muted">Nota</label><br>
      <input id="s_note" type="text" placeholder="Ej: RFC, uso CFDI, raz√≥n social..." style="width:100%; padding:10px 12px; border-radius:14px; border:1px solid var(--border);" />
    `,
    read: () => ({
      notas: byId("s_note").value.trim()
    })
  },

  regalos: {
    title: "üéÅ Regalos",
    desc: "Elige el tipo de envoltura o detalle.",
    form: () => `
      <label class="mini muted">Tipo de detalle</label><br>
      <select id="s_type" style="width:100%; margin:6px 0 10px;">
        <option value="Envoltura">Envoltura</option>
        <option value="Mo√±o">Mo√±o</option>
        <option value="Tarjeta">Tarjeta</option>
        <option value="Detalle especial">Detalle especial</option>
      </select>

      <label class="mini muted">Mensaje (opcional)</label><br>
      <input id="s_note" type="text" placeholder="Ej: Para: Ana, Feliz cumplea√±os..." style="width:100%; padding:10px 12px; border-radius:14px; border:1px solid var(--border);" />
    `,
    read: () => ({
      tipo: byId("s_type").value,
      mensaje: byId("s_note").value.trim()
    })
  }
};

  let currentServiceKey = null;

   // ====== ABRIR SERVICIO ======
   window.openService = function(key){
     currentServiceKey = key;
     const s = SERVICES[key];

     byId("serviceTitle").textContent = s.title;
     byId("serviceDesc").textContent = s.desc;
     byId("serviceForm").innerHTML = s.form();

     byId("serviceDialog").showModal();
     };

     byId("closeService").addEventListener("click", ()=> byId("serviceDialog").close());

    // ====== AGREGAR SERVICIO A LA LISTA ======
    byId("addServiceBtn").addEventListener("click", ()=>{
     if(!currentServiceKey) return;

     const s = SERVICES[currentServiceKey];
     const details = s.read(); 
     // Guarda el servicio 
     servicesSelected.push(
      { key: currentServiceKey, title: s.title, details
     });
     // ‚úÖ Mensaje de SERVICIO AGREGADO" 
     showToast("‚úÖ Servicio agregado");
     //Actualiza carrito visual 
     renderCart(); 
     // Cierra el modal 
     byId("serviceDialog").close(); 
     });

    
     // ====== ENVIAR SOLO EL SERVICIO POR WHATSAPP ======
     byId("serviceToWA").addEventListener("click", ()=>{
     const s = SERVICES[currentServiceKey];
     const details = s.read();

     let msg = `Holaaaa, me interesa este servicio:\n\n${s.title}\n`;
     msg += `Detalles: ${JSON.stringify(details, null, 0)}\n\n¬øMe cotizas por favor?`;

     window.open(whatsappLink(msg), "_blank", "noopener");
     });
 
    // ====== MENSAJE CUANDO AGREGAS UN PRODUCTO ======
    function showToast(msg){
    const t = byId("toast");
    t.textContent = msg;
    t.style.opacity = "1";
    t.style.transform = "translateX(-50%) translateY(-6px)";
    clearTimeout(window.__toastTimer);
    window.__toastTimer = setTimeout(()=>{
    t.style.opacity = "0";
    t.style.transform = "translateX(-50%) translateY(0)";
    }, 1200);
    }

    // ====== FILTRADO + ORDENAMIENTO DEL CAT√ÅLOGO (decide qu√© productos se muestran) ======
    function getFilteredProducts(){
      // 1) toma b√∫squeda (search)
      // 2) toma categor√≠a (category)
      // 3) toma orden (sort)
      // 4) filtra y ordena
      const q = byId("search").value.trim().toLowerCase();
      const cat = byId("category").value;
      const sort = byId("sort").value;

      let list = PRODUCTS.filter(p => {
        const matchesQ = (p.name + " " + p.desc).toLowerCase().includes(q);
        const matchesCat = cat === "all" ? true : p.cat === cat;
        return matchesQ && matchesCat;
      });

      if(sort === "priceAsc") list.sort((a,b)=>a.price-b.price);
      if(sort === "priceDesc") list.sort((a,b)=>b.price-a.price);
      // "popular" mantiene orden original

      return list;
    }
    
    function saveCart(){
     localStorage.setItem("arcoiris_cart", JSON.stringify(cart));
    }

    function loadCart(){
    try{
     const saved = JSON.parse(localStorage.getItem("arcoiris_cart") || "{}");
     if(saved && typeof saved === "object") cart = saved;
    }catch(e){ cart = {}; }
    }

    function clearSavedCart(){
     localStorage.removeItem("arcoiris_cart");
    }

    // ====== FUNCIONES DEL CARRITO (AGREGAR, AUMENTAR, DISMINUIR) ======
    // ====== ACCCIONES DEL CARRITO (expuestas al window) ======
    window.addToCart = function(id){
     cart[id] = (cart[id] || 0) + 1;
     saveCart();
     showToast("‚úÖ Agregado al carrito");
     renderCart();
    };

    window.incQty = function(id){
     cart[id] = (cart[id] || 0) + 1;
     saveCart();
     renderCart();
    };

    window.decQty = function(id){
     if(!cart[id]) return;
     cart[id] -= 1;
     if(cart[id] <= 0) delete cart[id];
     saveCart();
     renderCart();
    };

   // BOTON VACIAR
   byId("clearCart").addEventListener("click", ()=>{
     cart = {};
     servicesSelected = [];
     clearSavedCart();
     renderCart();
     showToast("üßπ Carrito y servicios vaciados");
    });

   // BOTON FLOTANTE DEL CARRITO
   byId("fabCart").addEventListener("click", openCart);

   // ====== RENDER DEL CAT√ÅLOGO (CREA EL HTML DE LAS TARJETAS) (crea el HTML de productos dentro del div #products)======
    function renderProducts(){
      // genera tarjetas con imagen, nombre, descripci√≥n, precio y bot√≥n ‚ÄúAgregar‚Äù
      const wrap = byId("products");
      const list = getFilteredProducts();
      wrap.innerHTML = list.map(p => `
        <article class="card product">
          <div class="thumb">
            ${p.badge ? `<span class="tag ${p.badge.toLowerCase()}">${p.badge}</span>` : ""}
           <img src="${p.img}" alt="${p.name}" loading="lazy">
          </div>
          <h3 class="pname">${p.name}</h3>
          <p class="pdesc">${p.desc}</p>
          <div class="row">
            <div>
              <div class="price">${money(p.price)}</div>
              <div class="mini">${p.cat}</div>
            </div>
            <button class="btn primary" type="button" onclick="addToCart(${p.id})">Agregar</button>
          </div>
        </article>
      `).join("");
    }

    function cartCount(){
      return Object.values(cart).reduce((a,b)=>a+b,0);
    }

    function cartSubtotal(){
      return Object.entries(cart).reduce((sum,[id,qty])=>{
        const p = PRODUCTS.find(x=>x.id===Number(id));
        return sum + (p ? p.price*qty : 0);
      },0);
    }
    // ===== QUITAR SERVICIO DEL CARRITO =====
    window.removeService = function(index){
     servicesSelected.splice(index, 1);
     showToast("üóëÔ∏è Servicio eliminado");
     renderCart();
    };

    // ====== RENDER DEL CARRITO (LISTA + BOTONES + SUBTOTAL) (actualiza lo que se ve dentro del modal del carrito)======
       function renderCart(){
       // muestra productos agregados, permite + y -, y actualiza subtotal
       const items = byId("cartItems");
      const entries = Object.entries(cart);

      // ===== SERVICIOS =====
      const serviceHTML = servicesSelected.length ? `
      <div style="margin-bottom:10px;">
        <div style="font-weight:1000; margin-bottom:6px;">üßæ Servicios</div>

       ${servicesSelected.map((s, idx) => {
         const extra = Object.entries(s.details || {})
          .filter(([_,v]) => String(v).trim() !== "")
          .map(([k,v]) => `${k}: ${v}`)
          .join(" ‚Ä¢ ");

        return `
          <div class="item">
            <div>
              <div style="font-weight:900;">${s.title}</div>
              <div class="mini muted">${extra || "Sin detalles"}</div>
            </div>

            <button class="btn light" type="button"
              onclick="removeService(${idx})"
              style="padding:8px 10px; border-radius:12px;">
              Quitar
            </button>
          </div>
        `;
      }).join("")}
    </div>
  ` : "";

  // ===== PRODUCTOS =====
  const productHTML = entries.length ? entries.map(([id,qty])=>{
    const p = PRODUCTS.find(x=>x.id===Number(id));
    if(!p) return "";
    const line = p.price * qty;

    return `
      <div class="item">
        <div>
          <div style="font-weight:900;">${CAT_ICON[p.cat] || "üõçÔ∏è"} ${p.name}</div>
          <div class="mini muted">${p.cat} ‚Ä¢ ${money(p.price)} c/u ‚Ä¢ <b>${money(line)}</b></div>
        </div>
        <div class="qty" aria-label="Cantidad">
          <button type="button" onclick="decQty(${p.id})">‚àí</button>
          <b style="min-width:22px; text-align:center; display:inline-block;">${qty}</b>
          <button type="button" onclick="incQty(${p.id})">+</button>
        </div>
      </div>
    `;
  }).join("") : `<p class="muted">No hay productos. Puedes agregar del cat√°logo.</p>`;

  if(!servicesSelected.length && !entries.length){
    items.innerHTML = `<p class="muted">Tu carrito est√° vac√≠o. Agrega productos o servicios.</p>`;
  } else {
    items.innerHTML = serviceHTML + productHTML;
  }

  // Contadores y totales
  byId("subtotal").textContent = money(cartSubtotal());
  byId("cartCount").textContent = cartCount();

  const fab = byId("cartCountFab");
  if(fab) fab.textContent = cartCount();
  }

    // ====== ABRIR / CERRAR EL MODAL DEL CARRITO (abre el <dialog> y lo cierra) ======
    function openCart(){
      const d = byId("cartDialog");
      if(typeof d.showModal === "function") d.showModal();
      else alert("Tu navegador no soporta dialog. Usa Chrome/Edge actualizado.");
      renderCart();
    }
    function closeCart(){ byId("cartDialog").close(); }

    // ====== WHATSAPP: CREA LINK Y GENERA MENSAJE DEL PEDIDO (arma el mensaje y lo manda a WhatsApp) ======
    function whatsappLink(message){
      const text = encodeURIComponent(message);
      return `https://wa.me/${WHATSAPP_NUMBER}?text=${text}`;
    }

    // Construye el mensaje con lista de productos y subtotal
    function buildOrderMessage(){
  const lines = [];
  lines.push("Holaaaa, quiero hacer este pedido de Papeler√≠a Arco√≠ris:");
  lines.push("");

  // ===== PRODUCTOS DEL CARRITO =====
  for(const [id,qty] of Object.entries(cart)){
    const p = PRODUCTS.find(x=>x.id===Number(id));
    if(!p) continue;
    lines.push(`‚Ä¢ ${qty} x ${p.name} (${money(p.price)} c/u)`);
  }

  // ===== SERVICIOS SELECCIONADOS =====
  if(servicesSelected.length){
    lines.push("");
    lines.push("Servicios solicitados:");

    for(const s of servicesSelected){
      const extra = Object.entries(s.details)
        .filter(([_,v]) => String(v).trim() !== "")
        .map(([k,v]) => `${k}: ${v}`)
        .join(", ");

      lines.push(`‚Ä¢ ${s.title}${extra ? " (" + extra + ")" : ""}`);
    }
  }

  // ===== SUBTOTAL FINAL =====
  lines.push("");
  lines.push(`Subtotal aproximado: ${money(cartSubtotal())}`);
  lines.push("¬øMe confirmas disponibilidad y total, por favor?");

  return lines.join("\n");
   }

   // ===== PROMO PANEL: clicks inteligentes =====
   function scrollToCatalog(){
   const el = document.querySelector("#catalogo");
   if(el) el.scrollIntoView({ behavior:"smooth", block:"start" });
   }

   function applyFilter(cat, search){
   // set valores
   if(cat){
    byId("category").value = cat;
   }
   if(search){
    byId("search").value = search;
   }
    // re-render + scroll
   renderProducts();
   scrollToCatalog();
   }

   function promoWhatsApp(){
   const msg = "Holaaa, quiero una cotizaci√≥n r√°pida / apartado. ¬øMe ayudas por favor?";
   window.open(whatsappLink(msg), "_blank", "noopener");
   }

   (function initPromoPanel(){
   const panel = document.querySelector("#promoPanel");
   if(!panel) return;

   panel.addEventListener("click", (e)=>{
    const btn = e.target.closest(".promoAction");
    if(!btn) return;

    const action = btn.dataset.action;

    if(action === "filter"){
      applyFilter(btn.dataset.cat || "all", btn.dataset.search || "");
      showToast("üìí Mostrando cuadernos");
      return;
    }

    if(action === "service"){
      const s = btn.dataset.service;
      if(s) openService(s);
      return;
    }

    if(action === "wa"){
      promoWhatsApp();
      return;
    }
   });
   })();

   // ===== CONTADOR DE PROMO (ej: termina el domingo 23:59) =====
   function startPromoCountdown(){
   const el = byId("promoCountdown");
   if(!el) return;

   const now = new Date();
   const end = new Date(now);
   const day = end.getDay(); // 0 domingo
   const daysToSunday = (7 - day) % 7;
   end.setDate(end.getDate() + daysToSunday);
   end.setHours(23,59,59,999);

   function tick(){
    const t = end.getTime() - Date.now();
    if(t <= 0){
      el.textContent = "00:00:00";
      return;
    }
    const totalSec = Math.floor(t/1000);
    const h = String(Math.floor(totalSec/3600)).padStart(2,"0");
    const m = String(Math.floor((totalSec%3600)/60)).padStart(2,"0");
    const s = String(totalSec%60).padStart(2,"0");
    el.textContent = `${h}:${m}:${s}`;
    setTimeout(tick, 1000);
   }
    tick();
    }

   
    // Esta funci√≥n pide a Google un token reCAPTCHA v3
     function ejecutarAntiGravity(accion) {
      return new Promise((resolve, reject) => {
       if (typeof grecaptcha === "undefined") {
         reject("reCAPTCHA no carg√≥. Revisa tu Site Key o conexi√≥n.");
         return;
       }

        grecaptcha.ready(() => {
        grecaptcha.execute("6Lcu91EsAAAAALVg3XWvFfk-JtvBf7fWlmAGLMh_", { action: accion })
          .then(token => resolve(token))
          .catch(err => reject(err));
      });
    });
  }
   
    // ====== EVENTOS: CLICK EN BOTONES Y CAMBIOS EN FILTROS ======
    byId("openCart").addEventListener("click", openCart);
    byId("closeCart").addEventListener("click", closeCart);

    byId("sendWA").addEventListener("click", async ()=>{
  if(cartCount() === 0 && servicesSelected.length === 0){
    alert("Tu carrito est√° vac√≠o.");
    return;
  }

  try {
    const token = await ejecutarAntiGravity("enviar_pedido");
    console.log("Token reCAPTCHA:", token);

    const url = whatsappLink(buildOrderMessage());
    window.open(url, "_blank", "noopener");
  } catch (e) {
    console.error(e);
    alert("No se pudo ejecutar reCAPTCHA. Revisa la Site Key y el dominio.");
  }
});
    // ====== BOTONES WHATSAPP GENERALES (ARRIBA Y ABAJO) ======
    const generalMsg = "Holaaa, me interesa la Papeler√≠a Arco√≠ris. ¬øMe compartes cat√°logo y precios, por favor?";
    byId("waTop").href = whatsappLink(generalMsg);
    byId("waBottom").href = whatsappLink(generalMsg);
    const waMap = byId("waMap");
    if(waMap) waMap.href = whatsappLink(generalMsg);


    // ====== FILTROS (BUSCAR, CATEGOR√çA, ORDEN) ======
    ["search","category","sort"].forEach(id=>{
      byId(id).addEventListener("input", renderProducts);
      byId(id).addEventListener("change", renderProducts);
    });

    // ====== INICIALIZACI√ìN (AL CARGAR LA P√ÅGINA) ======
    byId("year").textContent = new Date().getFullYear();

    // Init
    loadCart();
    renderProducts();
    renderCart();
    startPromoCountdown();

  </script>
</body>
 
</html> 



